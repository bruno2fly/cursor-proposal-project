(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33094,(e,t,s)=>{t.exports=e.r(90353)},13922,e=>{"use strict";var t=e.i(19873),s=e.i(11833),r=e.i(33094);function a({proposal:e}){let a=(0,r.useRouter)(),l=!!e,[n,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(""),[p,u]=(0,s.useState)(e?.client_name||""),[h,x]=(0,s.useState)(e?.slug||""),[b,g]=(0,s.useState)(e?.hero_title||"360Â° Marketing Service"),[j,v]=(0,s.useState)(e?.hero_subtitle||""),[N,_]=(0,s.useState)(e?.custom_note||""),[f,y]=(0,s.useState)(e?.status||"draft"),[k,C]=(0,s.useState)(e?.pricing_option_1_name||"3-Month Agreement"),[S,w]=(0,s.useState)(e?.pricing_option_1_price||1100),[P,$]=(0,s.useState)(e?.pricing_option_1_desc||"Commit to growth with our recommended partnership plan."),[T,E]=(0,s.useState)(e?.pricing_option_2_name||"Month-to-Month"),[O,A]=(0,s.useState)(e?.pricing_option_2_price||1400),[R,D]=(0,s.useState)(e?.pricing_option_2_desc||"Flexible month-to-month plan with no long-term commitment."),[M,B]=(0,s.useState)({});(0,s.useEffect)(()=>{fetch("/api/service-templates").then(e=>e.json()).then(t=>{if(i(t),e?.proposal_services){let s={};t.forEach(t=>{let r=e.proposal_services?.find(e=>e.service_id===t.id);s[t.id]={enabled:!r||r.enabled,sort_order:r?r.sort_order:t.sort_order,custom_summary:r?.custom_summary||""}}),B(s)}else{let e={};t.forEach(t=>{e[t.id]={enabled:!0,sort_order:t.sort_order,custom_summary:""}}),B(e)}}).catch(console.error)},[e]),(0,s.useEffect)(()=>{!l&&p&&x(p.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},[p,l]);let L=async t=>{t.preventDefault(),d(!0),m("");let s=Object.entries(M).map(([e,t])=>({service_id:e,enabled:t.enabled,sort_order:t.sort_order,custom_summary:t.custom_summary||null}));try{let t=l?`/api/proposals/${e.id}`:"/api/proposals",r=l?"PATCH":"POST",n=await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({client_name:p,slug:h,status:f,hero_title:b,hero_subtitle:j||null,custom_note:N||null,pricing_option_1_name:k,pricing_option_1_price:S,pricing_option_1_desc:P,pricing_option_2_name:T,pricing_option_2_price:O,pricing_option_2_desc:R,services:s})});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to save")}a.push("/admin"),a.refresh()}catch(e){m(e instanceof Error?e.message:"Failed to save")}finally{d(!1)}},U="w-full px-4 py-2.5 rounded-lg bg-dark-bg border border-dark-border text-white text-sm focus:outline-none focus:border-accent-purple transition-colors",q="block text-sm text-dark-text-light mb-1.5";return(0,t.jsxs)("form",{onSubmit:L,className:"space-y-8",children:[c&&(0,t.jsx)("div",{className:"text-sm text-red-400 bg-red-400/10 border border-red-400/20 rounded-lg p-3",children:c}),(0,t.jsxs)("div",{className:"bg-dark-card border border-dark-border rounded-2xl p-6",children:[(0,t.jsx)("h2",{className:"font-clash text-lg font-semibold mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Client Name *"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>u(e.target.value),className:U,required:!0,placeholder:"e.g. SUPERCRISP"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Slug *"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:U,required:!0,placeholder:"e.g. supercrisp-q1-2025"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Status"}),(0,t.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:U,children:[(0,t.jsx)("option",{value:"draft",children:"Draft"}),(0,t.jsx)("option",{value:"sent",children:"Sent"}),(0,t.jsx)("option",{value:"viewed",children:"Viewed"}),(0,t.jsx)("option",{value:"accepted",children:"Accepted"}),(0,t.jsx)("option",{value:"declined",children:"Declined"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-dark-card border border-dark-border rounded-2xl p-6",children:[(0,t.jsx)("h2",{className:"font-clash text-lg font-semibold mb-4",children:"Proposal Content"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Hero Title"}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>g(e.target.value),className:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Hero Subtitle"}),(0,t.jsx)("textarea",{value:j,onChange:e=>v(e.target.value),className:`${U} resize-none`,rows:2,placeholder:"Custom tagline for this client"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Personal Note (optional)"}),(0,t.jsx)("textarea",{value:N,onChange:e=>_(e.target.value),className:`${U} resize-none`,rows:2,placeholder:"A personal note shown at the top of the proposal"})]})]})]}),(0,t.jsxs)("div",{className:"bg-dark-card border border-dark-border rounded-2xl p-6",children:[(0,t.jsx)("h2",{className:"font-clash text-lg font-semibold mb-4",children:"Pricing"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3 p-4 rounded-xl border border-accent-purple/20 bg-accent-purple/5",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-accent-purple",children:"Option 1 (Recommended)"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Name"}),(0,t.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),className:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Price ($/month)"}),(0,t.jsx)("input",{type:"number",value:S,onChange:e=>w(Number(e.target.value)),className:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Description"}),(0,t.jsx)("input",{type:"text",value:P,onChange:e=>$(e.target.value),className:U})]})]}),(0,t.jsxs)("div",{className:"space-y-3 p-4 rounded-xl border border-dark-border",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-dark-text-light",children:"Option 2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Name"}),(0,t.jsx)("input",{type:"text",value:T,onChange:e=>E(e.target.value),className:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Price ($/month)"}),(0,t.jsx)("input",{type:"number",value:O,onChange:e=>A(Number(e.target.value)),className:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:q,children:"Description"}),(0,t.jsx)("input",{type:"text",value:R,onChange:e=>D(e.target.value),className:U})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-dark-card border border-dark-border rounded-2xl p-6",children:[(0,t.jsx)("h2",{className:"font-clash text-lg font-semibold mb-4",children:"Services"}),(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,t.jsxs)("div",{className:`p-4 rounded-xl border transition-colors ${M[e.id]?.enabled?"border-accent-green/20 bg-accent-green/5":"border-dark-border bg-dark-bg/30 opacity-60"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void B(e=>({...e,[t]:{...e[t],enabled:!e[t].enabled}}))},className:`w-5 h-5 rounded border flex items-center justify-center shrink-0 ${M[e.id]?.enabled?"bg-accent-green border-accent-green text-white":"border-dark-border"}`,children:M[e.id]?.enabled&&(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("span",{className:"text-lg",children:e.icon}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e.title}),e.subtitle&&(0,t.jsxs)("span",{className:"text-xs text-dark-text",children:["(",e.subtitle,")"]})]}),M[e.id]?.enabled&&(0,t.jsx)("div",{className:"mt-3 ml-8",children:(0,t.jsx)("input",{type:"text",value:M[e.id]?.custom_summary||"",onChange:t=>B(s=>({...s,[e.id]:{...s[e.id],custom_summary:t.target.value}})),className:`${U} text-xs`,placeholder:"Custom summary (leave blank to use default)"})})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-accent-pink to-accent-purple text-white font-medium text-sm disabled:opacity-50",children:o?"Saving...":l?"Update Proposal":"Create Proposal"}),l&&(0,t.jsx)("a",{href:`/proposal/${e.slug}`,target:"_blank",rel:"noopener noreferrer",className:"px-6 py-2.5 rounded-lg border border-dark-border text-white text-sm hover:bg-white/5 transition-colors",children:"Preview"}),(0,t.jsx)("button",{type:"button",onClick:()=>a.push("/admin"),className:"px-6 py-2.5 rounded-lg text-dark-text text-sm hover:text-white transition-colors",children:"Cancel"})]})]})}e.s(["default",()=>a])},25927,e=>{"use strict";var t=e.i(19873),s=e.i(13922);function r(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"font-clash text-3xl font-bold",children:"New Proposal"}),(0,t.jsx)("p",{className:"text-dark-text mt-1",children:"Create a new client proposal"})]}),(0,t.jsx)(s.default,{})]})}e.s(["default",()=>r])}]);